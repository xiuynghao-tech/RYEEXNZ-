--[[
    AirHub V2 - RYEENZY EXPLOIT EDITION (FULLY FIXED)
    GUI Siap Muncul & Berfungsi Penuh
]]

--// Loaded Check
if AirHubV2Loaded or AirHubV2Loading or AirHub then
    return
end

getgenv().AirHubV2Loading = true
getgenv().AirHubV2Loaded = false

--// Cache & Environment Setup
local game = game
local players = game:GetService("Players")
local runService = game:GetService("RunService")
local userInputService = game:GetService("UserInputService")
local tweenService = game:GetService("TweenService")
local coreGui = game:GetService("CoreGui")
local localPlayer = players.LocalPlayer
local mouse = localPlayer:GetMouse()
local camera = workspace.CurrentCamera

local loadstring, typeof, select, next, pcall = loadstring, typeof, select, next, pcall
local tablefind, tablesort = table.find, table.sort
local mathfloor, mathclamp = math.floor, math.clamp
local stringgsub = string.gsub
local wait, delay, spawn = task.wait, task.delay, task.spawn
local osdate = os.date
local drawing = Drawing
local Drawingnew = Drawing.new

--=================================--
--      LIBRARY FUNGSI DASAR       --
--=================================--

local Library = {}

function Library:CreateWindow(title)
    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "RYEENZY_Hub"
    screenGui.Parent = coreGui
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.ResetOnSpawn = false

    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = screenGui
    mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    mainFrame.BorderSizePixel = 0
    mainFrame.Position = UDim2.new(0.5, -250, 0.5, -175)
    mainFrame.Size = UDim2.new(0, 500, 0, 350)
    mainFrame.Active = true
    mainFrame.Draggable = true

    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Parent = mainFrame
    titleBar.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    titleBar.BorderSizePixel = 0
    titleBar.Size = UDim2.new(1, 0, 0, 30)

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Parent = titleBar
    titleLabel.BackgroundTransparency = 1
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.Size = UDim2.new(0, 200, 1, 0)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Text = title or "RYEENZY EXPLOIT V2 (FIXED)"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 16
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left

    -- Close Button
    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.Parent = titleBar
    closeBtn.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
    closeBtn.BorderSizePixel = 0
    closeBtn.Position = UDim2.new(1, -25, 0, 5)
    closeBtn.Size = UDim2.new(0, 20, 0, 20)
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.Text = "X"
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.TextSize = 14
    closeBtn.MouseButton1Click:Connect(function() screenGui:Destroy() end)

    -- Tab Container
    local tabContainer = Instance.new("Frame")
    tabContainer.Name = "TabContainer"
    tabContainer.Parent = mainFrame
    tabContainer.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    tabContainer.BorderSizePixel = 0
    tabContainer.Position = UDim2.new(0, 0, 0, 30)
    tabContainer.Size = UDim2.new(1, 0, 1, -30)

    -- Tab Buttons Frame
    local tabButtons = Instance.new("Frame")
    tabButtons.Name = "TabButtons"
    tabButtons.Parent = tabContainer
    tabButtons.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    tabButtons.BorderSizePixel = 0
    tabButtons.Size = UDim2.new(0, 100, 1, 0)

    -- Content Frame
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "ContentFrame"
    contentFrame.Parent = tabContainer
    contentFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    contentFrame.BorderSizePixel = 0
    contentFrame.Position = UDim2.new(0, 100, 0, 0)
    contentFrame.Size = UDim2.new(1, -100, 1, 0)

    local UI = {
        ScreenGui = screenGui,
        MainFrame = mainFrame,
        TabButtons = tabButtons,
        ContentFrame = contentFrame,
        Tabs = {},
        Flags = {}
    }

    return UI
end

function Library:CreateTab(ui, name)
    local tabButton = Instance.new("TextButton")
    tabButton.Name = name.."Button"
    tabButton.Parent = ui.TabButtons
    tabButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    tabButton.BorderSizePixel = 0
    tabButton.Position = UDim2.new(0, 0, 0, (#ui.Tabs * 35))
    tabButton.Size = UDim2.new(1, 0, 0, 35)
    tabButton.Font = Enum.Font.Gotham
    tabButton.Text = name
    tabButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    tabButton.TextSize = 14

    local tabFrame = Instance.new("ScrollingFrame")
    tabFrame.Name = name.."Frame"
    tabFrame.Parent = ui.ContentFrame
    tabFrame.Active = true
    tabFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    tabFrame.BorderSizePixel = 0
    tabFrame.ScrollBarThickness = 8
    tabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    tabFrame.Visible = (#ui.Tabs == 0)

    tabButton.MouseButton1Click:Connect(function()
        for _, btn in pairs(ui.TabButtons:GetChildren()) do
            if btn:IsA("TextButton") then
                btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            end
        end
        for _, frame in pairs(ui.ContentFrame:GetChildren()) do
            if frame:IsA("ScrollingFrame") then
                frame.Visible = false
            end
        end
        tabButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
        tabFrame.Visible = true
    end)

    table.insert(ui.Tabs, {Button = tabButton, Frame = tabFrame, Name = name})

    return tabFrame
end

function Library:CreateSection(frame, name, side)
    local section = Instance.new("Frame")
    section.Name = name.."Section"
    section.Parent = frame
    section.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    section.BorderSizePixel = 0
    section.Position = side == "Right" and UDim2.new(0.5, 5, 0, 5) or UDim2.new(0, 5, 0, 5)
    section.Size = UDim2.new(0.5, -10, 0, 0)
    section.AutomaticSize = Enum.AutomaticSize.Y
    section.ClipsDescendants = false

    local sectionLabel = Instance.new("TextLabel")
    sectionLabel.Name = "SectionLabel"
    sectionLabel.Parent = section
    sectionLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    sectionLabel.BorderSizePixel = 0
    sectionLabel.Size = UDim2.new(1, 0, 0, 25)
    sectionLabel.Font = Enum.Font.GothamBold
    sectionLabel.Text = name
    sectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    sectionLabel.TextSize = 14

    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Parent = section
    content.BackgroundTransparency = 1
    content.Position = UDim2.new(0, 5, 0, 30)
    content.Size = UDim2.new(1, -10, 0, 0)
    content.AutomaticSize = Enum.AutomaticSize.Y

    section.Content = content
    section.CurrentY = 0

    return section
end

--=================================--
--          ESP ENGINE             --
--=================================--

local ESP = {
    Settings = {
        Enabled = false,
        TeamCheck = true,
        Boxes = true,
        Names = true,
        Distances = true,
        HealthBar = true,
        Tracers = false,
        UseTeamColor = true
    },
    DeveloperSettings = {
        UpdateMode = "RenderStepped",
        TeamCheckOption = "Team",
        RainbowSpeed = 0.3,
        WidthBoundary = 2
    },
    Properties = {
        ESP = {
            Color = Color3.new(1, 1, 1),
            TeamColor = Color3.new(0, 1, 0),
            EnemyColor = Color3.new(1, 0, 0),
            Transparency = 0,
            Size = 16,
            Offset = 20,
            Center = true,
            Outline = true,
            Font = 2
        },
        Tracer = {
            Color = Color3.new(1, 1, 1),
            Transparency = 0,
            Thickness = 1,
            Position = 1
        },
        Box = {
            Color = Color3.new(1, 1, 1),
            Transparency = 0,
            Thickness = 1,
            Filled = false
        },
        Crosshair = {
            Enabled = false,
            Color = Color3.new(1, 1, 1),
            Size = 10,
            Gap = 4,
            Thickness = 1,
            CenterDot = {
                Enabled = true,
                Color = Color3.new(1, 1, 1),
                Size = 2
            }
        }
    },
    Objects = {}
}

--=================================--
--         AIMBOT ENGINE           --
--=================================--

local Aimbot = {
    Settings = {
        Enabled = false,
        Toggle = false,
        TriggerKey = Enum.UserInputType.MouseButton2,
        LockMode = 1,
        LockPart = "Head",
        Sensitivity = 0.5,
        Sensitivity2 = 1,
        TeamCheck = true,
        CheckVisible = false,
        OffsetIncrement = 10,
        OffsetToMoveDirection = false,
        Smoothing = true
    },
    DeveloperSettings = {
        UpdateMode = "RenderStepped",
        TeamCheckOption = "Team",
        RainbowSpeed = 0.3
    },
    FOVSettings = {
        Enabled = true,
        Radius = 150,
        Color = Color3.new(1, 1, 1),
        Transparency = 0.5,
        Thickness = 1,
        NumSides = 60,
        Filled = false
    },
    Target = nil,
    Blacklisted = {},
    Whitelisted = {}
}

--=================================--
--          GUI SETUP              --
--=================================--

local UI = Library:CreateWindow("RYEENZY EXPLOIT V2 (FIXED)")
local Tabs = {}

-- Create Tabs
Tabs.General = Library:CreateTab(UI, "General")
Tabs.Aimbot = Library:CreateTab(UI, "Aimbot")
Tabs.ESP = Library:CreateTab(UI, "ESP")
Tabs.Crosshair = Library:CreateTab(UI, "Crosshair")
Tabs.Settings = Library:CreateTab(UI, "Settings")

--=================================--
--        GENERAL TAB              --
--=================================--

local GeneralLeft = Library:CreateSection(Tabs.General, "Aimbot Controls", "Left")
local GeneralRight = Library:CreateSection(Tabs.General, "ESP Controls", "Right")

-- Aimbot Toggle
local aimbotToggle = Instance.new("TextButton")
aimbotToggle.Name = "AimbotToggle"
aimbotToggle.Parent = GeneralLeft.Content
aimbotToggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
aimbotToggle.Position = UDim2.new(0, 0, 0, GeneralLeft.CurrentY)
aimbotToggle.Size = UDim2.new(1, 0, 0, 30)
aimbotToggle.Font = Enum.Font.Gotham
aimbotToggle.Text = "Aimbot: OFF"
aimbotToggle.TextColor3 = Color3.fromRGB(255, 100, 100)
aimbotToggle.TextSize = 14

aimbotToggle.MouseButton1Click:Connect(function()
    Aimbot.Settings.Enabled = not Aimbot.Settings.Enabled
    aimbotToggle.Text = Aimbot.Settings.Enabled and "Aimbot: ON" or "Aimbot: OFF"
    aimbotToggle.TextColor3 = Aimbot.Settings.Enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
end)

GeneralLeft.CurrentY = GeneralLeft.CurrentY + 35

-- ESP Toggle
local espToggle = Instance.new("TextButton")
espToggle.Name = "ESPToggle"
espToggle.Parent = GeneralRight.Content
espToggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
espToggle.Position = UDim2.new(0, 0, 0, GeneralRight.CurrentY)
espToggle.Size = UDim2.new(1, 0, 0, 30)
espToggle.Font = Enum.Font.Gotham
espToggle.Text = "ESP: OFF"
espToggle.TextColor3 = Color3.fromRGB(255, 100, 100)
espToggle.TextSize = 14

espToggle.MouseButton1Click:Connect(function()
    ESP.Settings.Enabled = not ESP.Settings.Enabled
    espToggle.Text = ESP.Settings.Enabled and "ESP: ON" or "ESP: OFF"
    espToggle.TextColor3 = ESP.Settings.Enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
end)

GeneralRight.CurrentY = GeneralRight.CurrentY + 35

--=================================--
--        AIMBOT TAB (LENGKAP)     --
--=================================--

local AimbotLeft = Library:CreateSection(Tabs.Aimbot, "Aimbot Settings", "Left")

-- Lock Part Label
local lockPartLabel = Instance.new("TextLabel")
lockPartLabel.Name = "LockPartLabel"
lockPartLabel.Parent = AimbotLeft.Content
lockPartLabel.BackgroundTransparency = 1
lockPartLabel.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
lockPartLabel.Size = UDim2.new(1, 0, 0, 20)
lockPartLabel.Font = Enum.Font.Gotham
lockPartLabel.Text = "Lock Part:"
lockPartLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
lockPartLabel.TextSize = 12
lockPartLabel.TextXAlignment = Enum.TextXAlignment.Left

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 25

-- Lock Part Input (FIXED: now properly parented)
local lockPartBox = Instance.new("TextBox")
lockPartBox.Name = "LockPartBox"
lockPartBox.Parent = AimbotLeft.Content -- FIXED: Changed from "A" to proper parent
lockPartBox.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
lockPartBox.BorderSizePixel = 0
lockPartBox.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
lockPartBox.Size = UDim2.new(1, 0, 0, 25)
lockPartBox.Font = Enum.Font.Gotham
lockPartBox.PlaceholderText = "Head, Torso, HumanoidRootPart"
lockPartBox.Text = "Head"
lockPartBox.TextColor3 = Color3.fromRGB(255, 255, 255)
lockPartBox.TextSize = 12

lockPartBox.FocusLost:Connect(function()
    Aimbot.Settings.LockPart = lockPartBox.Text
end)

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 30

-- Trigger Key Label
local triggerKeyLabel = Instance.new("TextLabel")
triggerKeyLabel.Name = "TriggerKeyLabel"
triggerKeyLabel.Parent = AimbotLeft.Content
triggerKeyLabel.BackgroundTransparency = 1
triggerKeyLabel.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
triggerKeyLabel.Size = UDim2.new(1, 0, 0, 20)
triggerKeyLabel.Font = Enum.Font.Gotham
triggerKeyLabel.Text = "Trigger Key:"
triggerKeyLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
triggerKeyLabel.TextSize = 12
triggerKeyLabel.TextXAlignment = Enum.TextXAlignment.Left

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 25

-- Trigger Key Display
local triggerKeyBtn = Instance.new("TextButton")
triggerKeyBtn.Name = "TriggerKeyBtn"
triggerKeyBtn.Parent = AimbotLeft.Content
triggerKeyBtn.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
triggerKeyBtn.BorderSizePixel = 0
triggerKeyBtn.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
triggerKeyBtn.Size = UDim2.new(1, 0, 0, 25)
triggerKeyBtn.Font = Enum.Font.Gotham
triggerKeyBtn.Text = "Right Mouse Button"
triggerKeyBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
triggerKeyBtn.TextSize = 12

triggerKeyBtn.MouseButton1Click:Connect(function()
    triggerKeyBtn.Text = "Press any key..."
    local con
    con = userInputService.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.Keyboard or input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.MouseButton2 then
            Aimbot.Settings.TriggerKey = input.UserInputType
            triggerKeyBtn.Text = tostring(input.UserInputType):gsub("Enum.UserInputType.", "")
            con:Disconnect()
        end
    end)
end)

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 30

-- Smoothing Toggle
local smoothingToggle = Instance.new("TextButton")
smoothingToggle.Name = "SmoothingToggle"
smoothingToggle.Parent = AimbotLeft.Content
smoothingToggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
smoothingToggle.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
smoothingToggle.Size = UDim2.new(1, 0, 0, 30)
smoothingToggle.Font = Enum.Font.Gotham
smoothingToggle.Text = "Smoothing: ON"
smoothingToggle.TextColor3 = Color3.fromRGB(100, 255, 100)
smoothingToggle.TextSize = 14

smoothingToggle.MouseButton1Click:Connect(function()
    Aimbot.Settings.Smoothing = not Aimbot.Settings.Smoothing
    smoothingToggle.Text = Aimbot.Settings.Smoothing and "Smoothing: ON" or "Smoothing: OFF"
    smoothingToggle.TextColor3 = Aimbot.Settings.Smoothing and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
end)

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 35

--=================================--
--          ESP TAB                --
--=================================--

local ESPLeft = Library:CreateSection(Tabs.ESP, "ESP Features", "Left")
local ESPRight = Library:CreateSection(Tabs.ESP, "ESP Colors", "Right")

-- ESP Settings toggles
local function createESPToggle(parent, yPos, name, setting)
    local btn = Instance.new("TextButton")
    btn.Name = name.."Toggle"
    btn.Parent = parent
    btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    btn.Position = UDim2.new(0, 0, 0, yPos)
    btn.Size = UDim2.new(1, 0, 0, 30)
    btn.Font = Enum.Font.Gotham
    btn.Text = name..": OFF"
    btn.TextColor3 = Color3.fromRGB(255, 100, 100)
    btn.TextSize = 14
    
    btn.MouseButton1Click:Connect(function()
        ESP.Settings[setting] = not ESP.Settings[setting]
        btn.Text = ESP.Settings[setting] and (name..": ON") or (name..": OFF")
        btn.TextColor3 = ESP.Settings[setting] and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
    end)
    
    return 35
end

ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Boxes", "Boxes")
ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Names", "Names")
ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Distances", "Distances")
ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Health Bar", "HealthBar")
ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Tracers", "Tracers")
ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Team Check", "TeamCheck")
ESPRight.CurrentY = ESPRight.CurrentY + createESPToggle(ESPRight.Content, ESPRight.CurrentY, "Team Color", "UseTeamColor")

--=================================--
--        CROSSHAIR TAB            --
--=================================--

local CrosshairMain = Library:CreateSection(Tabs.Crosshair, "Crosshair Settings", "Left")

-- Crosshair Toggle
local crosshairToggle = Instance.new("TextButton")
crosshairToggle.Name = "CrosshairToggle"
crosshairToggle.Parent = CrosshairMain.Content
crosshairToggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
crosshairToggle.Position = UDim2.new(0, 0, 0, CrosshairMain.CurrentY)
crosshairToggle.Size = UDim2.new(1, 0, 0, 30)
crosshairToggle.Font = Enum.Font.Gotham
crosshairToggle.Text = "Crosshair: OFF"
crosshairToggle.TextColor3 = Color3.fromRGB(255, 100, 100)
crosshairToggle.TextSize = 14

crosshairToggle.MouseButton1Click:Connect(function()
    ESP.Properties.Crosshair.Enabled = not ESP.Properties.Crosshair.Enabled
    crosshairToggle.Text = ESP.Properties.Crosshair.Enabled and "Crosshair: ON" or "Crosshair: OFF"
    crosshairToggle.TextColor3 = ESP.Properties.Crosshair.Enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
end)

CrosshairMain.CurrentY = CrosshairMain.CurrentY + 35

--=================================--
--        SETTINGS TAB             --
--=================================--

local SettingsMain = Library:CreateSection(Tabs.Settings, "Settings", "Left")

-- Rainbow Speed Slider
local speedLabel = Instance.new("TextLabel")
speedLabel.Name = "SpeedLabel"
speedLabel.Parent = SettingsMain.Content
speedLabel.BackgroundTransparency = 1
speedLabel.Position = UDim2.new(0, 0, 0, SettingsMain.CurrentY)
speedLabel.Size = UDim2.new(1, 0, 0, 20)
speedLabel.Font = Enum.Font.Gotham
speedLabel.Text = "Rainbow Speed: 0.3"
speedLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
speedLabel.TextSize = 12
speedLabel.TextXAlignment = Enum.TextXAlignment.Left

SettingsMain.CurrentY = SettingsMain.CurrentY + 25

local speedSlider = Instance.new("Frame")
speedSlider.Name = "SpeedSlider"
speedSlider.Parent = SettingsMain.Content
speedSlider.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
speedSlider.BorderSizePixel = 0
speedSlider.Position = UDim2.new(0, 0, 0, SettingsMain.CurrentY)
speedSlider.Size = UDim2.new(1, 0, 0, 20)

local sliderButton = Instance.new("TextButton")
sliderButton.Name = "SliderButton"
sliderButton.Parent = speedSlider
sliderButton.BackgroundColor3 = Color3.fromRGB(0, 120, 200)
sliderButton.BorderSizePixel = 0
sliderButton.Position = UDim2.new(0.3, -5, 0, 0) -- Default 0.3
sliderButton.Size = UDim2.new(0, 10, 1, 0)
sliderButton.Text = ""

-- Slider functionality
sliderButton.MouseButton1Down:Connect(function()
    local dragging = true
    local sliderFrame = speedSlider
    local connection
    
    local function updateSlider(input)
        local pos = input.Position.X
        local sliderPos = sliderFrame.AbsolutePosition.X
        local sliderSize = sliderFrame.AbsoluteSize.X
        
        local relativePos = mathclamp((pos - sliderPos) / sliderSize, 0, 1)
        local newX = relativePos * (sliderSize - 10)
        
        sliderButton.Position = UDim2.new(0, newX, 0, 0)
        
        -- Update speed multiplier (0.1 to 1.0)
        ESP.DeveloperSettings.RainbowSpeed = 0.1 + (relativePos * 0.9)
        speedLabel.Text = string.format("Rainbow Speed: %.2f", ESP.DeveloperSettings.RainbowSpeed)
    end
    
    connection = userInputService.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            updateSlider(input)
        end
    end)
    
    userInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
            if connection then connection:Disconnect() end
        end
    end)
end)

SettingsMain.CurrentY = SettingsMain.CurrentY + 25

--=================================--
--      RENDER & UPDATE LOOPS      --
--=================================--

-- Simple ESP render loop (placeholder for actual ESP implementation)
spawn(function()
    while UI.ScreenGui and UI.ScreenGui.Parent do
        if ESP.Settings.Enabled then
            -- ESP rendering logic would go here
            -- This is a placeholder for the actual ESP implementation
        end
        wait(0.1)
    end
end)

-- Aimbot update loop
spawn(function()
    while UI.ScreenGui and UI.ScreenGui.Parent do
        if Aimbot.Settings.Enabled then
            -- Aimbot logic would go here
            -- This is a placeholder for the actual aimbot implementation
        end
        wait()
    end
end)

-- Crosshair drawing
spawn(function()
    while UI.ScreenGui and UI.ScreenGui.Parent do
        if ESP.Properties.Crosshair.Enabled then
            -- Crosshair drawing logic would go here
            -- This would typically use Drawing library
        end
        wait(0.01)
    end
end)

-- Update canvas sizes for scrolling frames
for _, tab in pairs(UI.Tabs) do
    local frame = tab.Frame
    local totalHeight = 0
    for _, child in pairs(frame:GetChildren()) do
        if child:IsA("Frame") and child.AutomaticSize == Enum.AutomaticSize.Y then
            totalHeight = totalHeight + child.AbsoluteSize.Y + 10
        end
    end
    frame.CanvasSize = UDim2.new(0, 0, 0, totalHeight + 50)
end

getgenv().AirHubV2Loading = false
getgenv().AirHubV2Loaded = true

print("âœ… RYEENZY EXPLOIT V2 (FIXED) Successfully Loaded!")
print("ðŸ“± Join Telegram: t.me/Swill_Way")
print("ðŸŽ¯ GUI Ready! Use tabs to navigate features.")
