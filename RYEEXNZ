-- RYEENZY EXPLOIT - The Forge
-- UI Library: Obsidian (https://github.com/deividcomsono/Obsidian)

-- Memuat Library dan Addons
local repo = "https://raw.githubusercontent.com/deividcomsono/Obsidian/main/"
local Library = loadstring(game:HttpGet(repo .. "Library.lua"))()
local ThemeManager = loadstring(game:HttpGet(repo .. "addons/ThemeManager.lua"))()
local SaveManager = loadstring(game:HttpGet(repo .. "addons/SaveManager.lua"))()

-- Inisialisasi variabel global untuk Options dan Toggles
local Options = Library.Options
local Toggles = Library.Toggles

-- Konfigurasi Library
Library.ForceCheckbox = false
Library.ShowToggleFrameInKeybinds = true

-- Membuat Jendela Utama
local Window = Library:CreateWindow({
    Title = "RYEENZY EXPLOIT",
    Footer = "The Forge - Full Features",
    Icon = 95816097006870, -- Icon default
    NotifySide = "Right",
    ShowCustomCursor = true,
    Resizable = true,
})

-- Membuat Tab
local Tabs = {
    Farming = Window:AddTab("Farming", "pickaxe"),       -- Ikon pickaxe
    Combat = Window:AddTab("Combat", "sword"),           -- Ikon sword
    Forging = Window:AddTab("Forging", "hammer"),        -- Ikon hammer
    Player = Window:AddTab("Player", "user"),            -- Ikon user
    Misc = Window:AddTab("Misc", "settings"),            -- Ikon settings
    ["UI Settings"] = Window:AddTab("UI Settings", "settings"),
}

-- ==================================================
-- TAB FARMING (Pertanian & Penambangan)
-- ==================================================
local FarmingLeft = Tabs.Farming:AddLeftGroupbox("Auto Mine")
local FarmingRight = Tabs.Farming:AddRightGroupbox("World & Teleport")

-- Auto Mine Toggle
FarmingLeft:AddToggle("AutoMine", {
    Text = "Auto Mine",
    Tooltip = "Menambang batu/boulder di sekitar secara otomatis.",
    Default = false,
    Callback = function(Value)
        -- Logika Auto Mine akan ditempatkan di sini atau menggunakan :OnChanged
        print("Auto Mine:", Value)
    end,
})

-- Pilihan Radius Tambang
FarmingLeft:AddSlider("MineRadius", {
    Text = "Radius Tambang",
    Default = 10,
    Min = 5,
    Max = 30,
    Rounding = 0,
    Suffix = " stud",
    Tooltip = "Jarak maksimum untuk mendeteksi batu.",
})

-- Pilihan Kecepatan Tambang (Delay)
FarmingLeft:AddSlider("MineDelay", {
    Text = "Kecepatan (Delay)",
    Default = 0.2,
    Min = 0.1,
    Max = 1,
    Rounding = 1,
    Suffix = "s",
    Tooltip = "Jeda waktu antara setiap pukulan.",
})

-- Auto Collect Item
FarmingLeft:AddToggle("AutoCollect", {
    Text = "Auto Collect Item",
    Tooltip = "Mengambil ore/item yang jatuh secara otomatis.",
    Default = true,
})

-- Dropdown Lokasi Teleport
FarmingRight:AddDropdown("TeleportLocation", {
    Values = { "Spawn Area", "Forgotten Kingdom", "Deep Mines", "Boss Arena" },
    Default = 1,
    Multi = false,
    Text = "Teleport ke",
    Tooltip = "Pilih lokasi untuk teleport.",
})

-- Tombol Teleport
FarmingRight:AddButton({
    Text = "Teleport",
    Func = function()
        local selectedLocation = Options.TeleportLocation.Value
        print("Teleport ke:", selectedLocation)
        -- Logika teleport berdasarkan pilihan
        -- Contoh: Cari Part/CFrame berdasarkan nama lokasi
    end,
    Tooltip = "Klik untuk teleport ke lokasi yang dipilih.",
})

FarmingRight:AddDivider()

-- ESP Ore
FarmingRight:AddToggle("OreESP", {
    Text = "ESP Ore",
    Tooltip = "Menampilkan lokasi ore melalui tembok (Highlight).",
    Default = false,
})

-- ==================================================
-- TAB COMBAT (Pertarungan)
-- ==================================================
local CombatLeft = Tabs.Combat:AddLeftGroupbox("Auto Battle")
local CombatRight = Tabs.Combat:AddRightGroupbox("Targeting & ESP")

-- Auto Kill
CombatLeft:AddToggle("AutoKill", {
    Text = "Auto Kill",
    Tooltip = "Menyerang monster di sekitar secara otomatis.",
    Default = false,
})

-- Kill Aura
CombatLeft:AddToggle("KillAura", {
    Text = "Kill Aura",
    Tooltip = "Menyerang semua musuh dalam jangkauan tanpa menarget.",
    Default = false,
})

-- Pilihan Radius Serangan
CombatLeft:AddSlider("AttackRadius", {
    Text = "Radius Serangan",
    Default = 15,
    Min = 5,
    Max = 40,
    Rounding = 0,
    Suffix = " stud",
})

-- Pilihan Target Prioritas
CombatRight:AddDropdown("PriorityTarget", {
    Values = { "Terdekat", "HP Terendah", "Level Tertinggi", "Boss" },
    Default = 1,
    Multi = false,
    Text = "Prioritas Target",
})

-- ESP Player/Monster
CombatRight:AddToggle("EnemyESP", {
    Text = "ESP Monster",
    Tooltip = "Menampilkan lokasi monster.",
    Default = false,
})

CombatRight:AddToggle("PlayerESP", {
    Text = "ESP Player",
    Tooltip = "Menampilkan lokasi player lain.",
    Default = false,
})

-- ==================================================
-- TAB FORGING (Penempaan)
-- ==================================================
local ForgingLeft = Tabs.Forging:AddLeftGroupbox("Auto Forge")
local ForgingRight = Tabs.Forging:AddRightGroupbox("Crafting Settings")

-- Auto Forge
ForgingLeft:AddToggle("AutoForge", {
    Text = "Auto Forge",
    Tooltip = "Menempa item secara otomatis menggunakan ore di inventory.",
    Default = false,
})

-- Pilihan Tipe Item yang Akan Ditempa
ForgingLeft:AddDropdown("ForgeItemType", {
    Values = { "Weapon (Senjata)", "Armor (Baju Besi)", "Terlaris (Profit)" },
    Default = 1,
    Multi = false,
    Text = "Tipe Item",
})

-- Pilihan Kualitas
ForgingLeft:AddDropdown("ForgeQuality", {
    Values = { "Normal", "Good", "Perfect" },
    Default = 1,
    Multi = false,
    Text = "Kualitas Target",
})

-- Auto Complete Minigame
ForgingRight:AddToggle("AutoMinigame", {
    Text = "Auto Selesaikan Minigame",
    Tooltip = "Secara otomatis menyelesaikan minigame forging (smelting, pouring, forging).",
    Default = true,
})

-- Tombol Forge Sekarang (Manual)
ForgingRight:AddButton({
    Text = "Forge Sekarang (Manual)",
    Func = function()
        print("Memulai proses forging manual...")
        -- Panggil fungsi forge
    end,
})

-- ==================================================
-- TAB PLAYER (Pemain)
-- ==================================================
local PlayerLeft = Tabs.Player:AddLeftGroupbox("Stats & Booster")
local PlayerRight = Tabs.Player:AddRightGroupbox("Inventory & Quests")

-- Auto Level / Auto Claim XP
PlayerLeft:AddToggle("AutoLevel", {
    Text = "Auto Level (Claim XP)",
    Tooltip = "Secara otomatis meng-klaim XP dari Index atau quest yang selesai.",
    Default = false,
})

-- Slider Kecepatan Jalan
PlayerLeft:AddSlider("WalkSpeed", {
    Text = "WalkSpeed",
    Default = 16,
    Min = 16,
    Max = 120,
    Rounding = 0,
    Suffix = " ws",
    Tooltip = "Mengubah kecepatan jalan karakter.",
})

-- Slider Kecepatan Lompat
PlayerLeft:AddSlider("JumpPower", {
    Text = "JumpPower",
    Default = 50,
    Min = 50,
    Max = 200,
    Rounding = 0,
    Suffix = " jp",
})

-- Tombol Reset Speed
PlayerLeft:AddButton({
    Text = "Reset Speed",
    Func = function()
        Options.WalkSpeed:SetValue(16)
        Options.JumpPower:SetValue(50)
        print("Speed di-reset ke normal.")
    end,
})

-- Auto Accept Quest
PlayerRight:AddToggle("AutoAcceptQuest", {
    Text = "Auto Accept Quest",
    Tooltip = "Secara otomatis menerima quest dari NPC saat berada di dekatnya.",
    Default = false,
})

-- Auto Complete Quest
PlayerRight:AddToggle("AutoCompleteQuest", {
    Text = "Auto Complete/Turn In Quest",
    Tooltip = "Secara otomatis menyerahkan quest yang sudah selesai ke NPC.",
    Default = false,
})

-- ==================================================
-- TAB MISC (Lain-lain)
-- ==================================================
local MiscLeft = Tabs.Misc:AddLeftGroupbox("Miscellaneous")
local MiscRight = Tabs.Misc:AddRightGroupbox("Keybinds & Utility")

-- Anti AFK
MiscLeft:AddToggle("AntiAFK", {
    Text = "Anti AFK",
    Tooltip = "Mencegah koneksi terputus karena tidak bergerak.",
    Default = true,
})

-- NoClip (Hati-hati)
MiscLeft:AddToggle("NoClip", {
    Text = "NoClip (Tembus Dinding)",
    Tooltip = "Memungkinkan Anda menembus dinding. Gunakan dengan risiko sendiri!",
    Default = false,
    Risky = true, -- Teks akan berwarna merah sebagai peringatan
})

-- Invisible (Hide Character)
MiscLeft:AddToggle("Invisible", {
    Text = "Invisible (Sembunyikan Karakter)",
    Tooltip = "Membuat karakter Anda tidak terlihat oleh pemain lain (Client-side).",
    Default = false,
})

-- Slider Field of View (FOV)
MiscLeft:AddSlider("FOV", {
    Text = "Field of View (FOV)",
    Default = 70,
    Min = 40,
    Max = 120,
    Rounding = 0,
    Suffix = "Â°",
})

-- Tombol Rejoin
MiscRight:AddButton({
    Text = "Rejoin Server",
    Func = function()
        Library:Notify("Memproses rejoin...")
        game:GetService("TeleportService"):Teleport(game.PlaceId, game:GetService("Players").LocalPlayer)
    end,
    Tooltip = "Teleport kembali ke server yang sama.",
})

-- Tombol Server Hop
MiscRight:AddButton({
    Text = "Server Hop",
    Func = function()
        Library:Notify("Mencari server baru...")
        -- Logika Server Hop (cukup kompleks, contoh sederhana: pindah ke server acak)
        -- Tempatkan kode server hop di sini
    end,
})

-- ==================================================
-- TAB UI SETTINGS (Pengaturan Tampilan)
-- ==================================================
local UIGroup = Tabs["UI Settings"]:AddLeftGroupbox("Menu Settings")

-- Menu Toggle Button
UIGroup:AddButton({
    Text = "Toggle Menu",
    Func = function()
        Library:Toggle()
    end,
    Tooltip = "Menampilkan atau menyembunyikan menu.",
})

UIGroup:AddLabel("Menu Keybind"):AddKeyPicker("MenuKeybind", {
    Default = "RightShift", -- Ganti dengan key yang diinginkan
    Text = "Keybind",
    NoUI = true, -- Tidak menampilkan picker di UI, hanya diatur di sini
    Callback = function(Value)
        Library:Toggle()
    end,
})

-- Pemisah
UIGroup:AddDivider()

-- Di sinilah addon ThemeManager dan SaveManager akan ditempatkan
-- Mereka akan menambahkan tab mereka sendiri secara otomatis
ThemeManager:SetLibrary(Library)
SaveManager:SetLibrary(Library)

-- Menambahkan folder untuk menyimpan konfigurasi
SaveManager:SetFolder("RYEENZY/TheForge")

-- Ignore keys tertentu agar tidak ikut tersimpan (misalnya keybind menu)
SaveManager:IgnoreThemeSettings() -- Mengabaikan pengaturan tema dari save file
SaveManager:SetIgnoreIndexes({ "MenuKeybind" }) -- Mengabaikan keybind menu

-- Membangun tab untuk ThemeManager dan SaveManager
ThemeManager:ApplyToTab(Tabs["UI Settings"])
SaveManager:BuildConfigSection(Tabs["UI Settings"])

-- ==================================================
-- LOGIKA UTAMA SCRIPT (Contoh Sederhana)
-- ==================================================
-- Disarankan untuk menulis logika fitur di sini atau di file terpisah
-- Menggunakan :OnChanged untuk merespon perubahan nilai toggle/slider

-- Contoh untuk Auto Mine
Toggles.AutoMine:OnChanged(function()
    if Toggles.AutoMine.Value then
        -- Mulai loop auto mine
        print("Memulai Auto Mine...")
        -- Contoh loop sederhana (gunakan task.spawn atau while loop dengan wait)
        task.spawn(function()
            while Toggles.AutoMine.Value do
                -- Logika mencari dan memukul batu
                -- Contoh: Cari object dengan nama "Rock" atau "Boulder"
                local rock = game:GetService("Workspace"):FindFirstChild("Rock") -- Ini hanya contoh, perlu disesuaikan
                if rock then
                    -- Lakukan aksi menambang
                    print("Menambang batu...")
                end
                wait(Options.MineDelay.Value) -- Gunakan delay dari slider
            end
        end)
    else
        print("Auto Mine dihentikan.")
    end
end)

-- Contoh untuk WalkSpeed
Options.WalkSpeed:OnChanged(function()
    local player = game:GetService("Players").LocalPlayer
    if player and player.Character and player.Character:FindFirstChild("Humanoid") then
        player.Character.Humanoid.WalkSpeed = Options.WalkSpeed.Value
    end
end)

-- Contoh untuk Anti AFK
local vu = game:GetService("VirtualUser")
Toggles.AntiAFK:OnChanged(function()
    if Toggles.AntiAFK.Value then
        game:GetService("Players").LocalPlayer.Idled:Connect(function()
            vu:Button2Down(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
            wait(1)
            vu:Button2Up(Vector2.new(0,0), workspace.CurrentCamera.CFrame)
        end)
    end
end)

-- Notifikasi bahwa script telah dimuat
Library:Notify("RYEENZY EXPLOIT for The Forge berhasil dimuat! Selamat menggunakan.", 3)
