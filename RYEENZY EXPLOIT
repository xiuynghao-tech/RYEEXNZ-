--[[
    AirHub V2 - RYEENZY EXPLOIT EDITION
    Fully Self-Contained Version
    Tidak bergantung pada repository eksternal
]]

--// Loaded Check
if AirHubV2Loaded or AirHubV2Loading or AirHub then
    return
end

getgenv().AirHubV2Loading = true
getgenv().AirHubV2Loaded = false

--// Cache & Environment Setup
local game = game
local players = game:GetService("Players")
local runService = game:GetService("RunService")
local userInputService = game:GetService("UserInputService")
local tweenService = game:GetService("TweenService")
local coreGui = game:GetService("CoreGui")
local localPlayer = players.LocalPlayer
local mouse = localPlayer:GetMouse()
local camera = workspace.CurrentCamera

local loadstring, typeof, select, next, pcall = loadstring, typeof, select, next, pcall
local tablefind, tablesort = table.find, table.sort
local mathfloor, mathclamp = math.floor, math.clamp
local stringgsub = string.gsub
local wait, delay, spawn = task.wait, task.delay, task.spawn
local osdate = os.date
local drawing = Drawing
local Drawingnew = Drawing.new

--=================================--
--      LIBRARY FUNGSI DASAR       --
--=================================--

local Library = {}

function Library:CreateWindow(title)
    -- ScreenGui
    local screenGui = Instance.new("ScreenGui")
    screenGui.Name = "RYEENZY_Hub"
    screenGui.Parent = coreGui
    screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    screenGui.ResetOnSpawn = false
    
    -- Main Frame
    local mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Parent = screenGui
    mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    mainFrame.BorderSizePixel = 0
    mainFrame.Position = UDim2.new(0.5, -250, 0.5, -175)
    mainFrame.Size = UDim2.new(0, 500, 0, 350)
    mainFrame.Active = true
    mainFrame.Draggable = true
    
    -- Title Bar
    local titleBar = Instance.new("Frame")
    titleBar.Name = "TitleBar"
    titleBar.Parent = mainFrame
    titleBar.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    titleBar.BorderSizePixel = 0
    titleBar.Size = UDim2.new(1, 0, 0, 30)
    
    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = "TitleLabel"
    titleLabel.Parent = titleBar
    titleLabel.BackgroundTransparency = 1
    titleLabel.Position = UDim2.new(0, 10, 0, 0)
    titleLabel.Size = UDim2.new(0, 200, 1, 0)
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.Text = title or "RYEENZY EXPLOIT"
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 16
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    
    -- Tab Container
    local tabContainer = Instance.new("Frame")
    tabContainer.Name = "TabContainer"
    tabContainer.Parent = mainFrame
    tabContainer.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    tabContainer.BorderSizePixel = 0
    tabContainer.Position = UDim2.new(0, 0, 0, 30)
    tabContainer.Size = UDim2.new(1, 0, 1, -30)
    
    -- Tab Buttons Frame
    local tabButtons = Instance.new("Frame")
    tabButtons.Name = "TabButtons"
    tabButtons.Parent = tabContainer
    tabButtons.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    tabButtons.BorderSizePixel = 0
    tabButtons.Size = UDim2.new(0, 100, 1, 0)
    
    -- Content Frame
    local contentFrame = Instance.new("Frame")
    contentFrame.Name = "ContentFrame"
    contentFrame.Parent = tabContainer
    contentFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    contentFrame.BorderSizePixel = 0
    contentFrame.Position = UDim2.new(0, 100, 0, 0)
    contentFrame.Size = UDim2.new(1, -100, 1, 0)
    
    local UI = {
        ScreenGui = screenGui,
        MainFrame = mainFrame,
        TabButtons = tabButtons,
        ContentFrame = contentFrame,
        Tabs = {},
        Flags = {}
    }
    
    return UI
end

function Library:CreateTab(ui, name)
    local tabButton = Instance.new("TextButton")
    tabButton.Name = name.."Button"
    tabButton.Parent = ui.TabButtons
    tabButton.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    tabButton.BorderSizePixel = 0
    tabButton.Position = UDim2.new(0, 0, 0, (#ui.Tabs * 35))
    tabButton.Size = UDim2.new(1, 0, 0, 35)
    tabButton.Font = Enum.Font.Gotham
    tabButton.Text = name
    tabButton.TextColor3 = Color3.fromRGB(200, 200, 200)
    tabButton.TextSize = 14
    
    local tabFrame = Instance.new("ScrollingFrame")
    tabFrame.Name = name.."Frame"
    tabFrame.Parent = ui.ContentFrame
    tabFrame.Active = true
    tabFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    tabFrame.BorderSizePixel = 0
    tabFrame.ScrollBarThickness = 8
    tabFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
    tabFrame.Visible = #ui.Tabs == 0
    
    tabButton.MouseButton1Click:Connect(function()
        for _, btn in pairs(ui.TabButtons:GetChildren()) do
            if btn:IsA("TextButton") then
                btn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            end
        end
        for _, frame in pairs(ui.ContentFrame:GetChildren()) do
            if frame:IsA("ScrollingFrame") then
                frame.Visible = false
            end
        end
        tabButton.BackgroundColor3 = Color3.fromRGB(65, 65, 65)
        tabFrame.Visible = true
    end)
    
    table.insert(ui.Tabs, {Button = tabButton, Frame = tabFrame, Name = name})
    
    return tabFrame
end

function Library:CreateSection(frame, name, side)
    local section = Instance.new("Frame")
    section.Name = name.."Section"
    section.Parent = frame
    section.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    section.BorderSizePixel = 0
    section.Position = side == "Right" and UDim2.new(0.5, 5, 0, 5) or UDim2.new(0, 5, 0, 5)
    section.Size = UDim2.new(0.5, -10, 0, 0)
    section.AutomaticSize = Enum.AutomaticSize.Y
    section.ClipsDescendants = false
    
    local sectionLabel = Instance.new("TextLabel")
    sectionLabel.Name = "SectionLabel"
    sectionLabel.Parent = section
    sectionLabel.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    sectionLabel.BorderSizePixel = 0
    sectionLabel.Size = UDim2.new(1, 0, 0, 25)
    sectionLabel.Font = Enum.Font.GothamBold
    sectionLabel.Text = name
    sectionLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    sectionLabel.TextSize = 14
    
    local content = Instance.new("Frame")
    content.Name = "Content"
    content.Parent = section
    content.BackgroundTransparency = 1
    content.Position = UDim2.new(0, 5, 0, 30)
    content.Size = UDim2.new(1, -10, 0, 0)
    content.AutomaticSize = Enum.AutomaticSize.Y
    
    section.Content = content
    section.CurrentY = 0
    
    return section
end

--=================================--
--          ESP ENGINE             --
--=================================--

local ESP = {
    Settings = {
        Enabled = false,
        TeamCheck = true,
        Boxes = true,
        Names = true,
        Distances = true,
        HealthBar = true,
        Tracers = false,
        UseTeamColor = true
    },
    DeveloperSettings = {
        UpdateMode = "RenderStepped",
        TeamCheckOption = "Team",
        RainbowSpeed = 0.3,
        WidthBoundary = 2
    },
    Properties = {
        ESP = {
            Color = Color3.new(1, 1, 1),
            TeamColor = Color3.new(0, 1, 0),
            EnemyColor = Color3.new(1, 0, 0),
            Transparency = 0,
            Size = 16,
            Offset = 20,
            Center = true,
            Outline = true,
            Font = 2
        },
        Tracer = {
            Color = Color3.new(1, 1, 1),
            Transparency = 0,
            Thickness = 1,
            Position = 1
        },
        Box = {
            Color = Color3.new(1, 1, 1),
            Transparency = 0,
            Thickness = 1,
            Filled = false
        },
        Crosshair = {
            Enabled = false,
            Color = Color3.new(1, 1, 1),
            Size = 10,
            Gap = 4,
            Thickness = 1,
            CenterDot = {
                Enabled = true,
                Color = Color3.new(1, 1, 1),
                Size = 2
            }
        }
    },
    Objects = {}
}

--=================================--
--         AIMBOT ENGINE           --
--=================================--

local Aimbot = {
    Settings = {
        Enabled = false,
        Toggle = false,
        TriggerKey = Enum.UserInputType.MouseButton2,
        LockMode = 1,
        LockPart = "Head",
        Sensitivity = 0.5,
        Sensitivity2 = 1,
        TeamCheck = true,
        CheckVisible = false,
        OffsetIncrement = 10,
        OffsetToMoveDirection = false,
        Smoothing = true
    },
    DeveloperSettings = {
        UpdateMode = "RenderStepped",
        TeamCheckOption = "Team",
        RainbowSpeed = 0.3
    },
    FOVSettings = {
        Enabled = true,
        Radius = 150,
        Color = Color3.new(1, 1, 1),
        Transparency = 0.5,
        Thickness = 1,
        NumSides = 60,
        Filled = false
    },
    Target = nil,
    Blacklisted = {},
    Whitelisted = {}
}

--=================================--
--          GUI SETUP              --
--=================================--

local UI = Library:CreateWindow("RYEENZY EXPLOIT V2")
local Tabs = {}

-- Create Tabs
Tabs.General = Library:CreateTab(UI, "General")
Tabs.Aimbot = Library:CreateTab(UI, "Aimbot")
Tabs.ESP = Library:CreateTab(UI, "ESP")
Tabs.Crosshair = Library:CreateTab(UI, "Crosshair")
Tabs.Settings = Library:CreateTab(UI, "Settings")

--=================================--
--        GENERAL TAB              --
--=================================--

local GeneralLeft = Library:CreateSection(Tabs.General, "Aimbot Controls", "Left")
local GeneralRight = Library:CreateSection(Tabs.General, "ESP Controls", "Right")

-- Aimbot Toggle
local aimbotToggle = Instance.new("TextButton")
aimbotToggle.Name = "AimbotToggle"
aimbotToggle.Parent = GeneralLeft.Content
aimbotToggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
aimbotToggle.Position = UDim2.new(0, 0, 0, GeneralLeft.CurrentY)
aimbotToggle.Size = UDim2.new(1, 0, 0, 30)
aimbotToggle.Font = Enum.Font.Gotham
aimbotToggle.Text = "Aimbot: OFF"
aimbotToggle.TextColor3 = Color3.fromRGB(255, 100, 100)
aimbotToggle.TextSize = 14

aimbotToggle.MouseButton1Click:Connect(function()
    Aimbot.Settings.Enabled = not Aimbot.Settings.Enabled
    aimbotToggle.Text = Aimbot.Settings.Enabled and "Aimbot: ON" or "Aimbot: OFF"
    aimbotToggle.TextColor3 = Aimbot.Settings.Enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
end)

GeneralLeft.CurrentY = GeneralLeft.CurrentY + 35

-- ESP Toggle
local espToggle = Instance.new("TextButton")
espToggle.Name = "ESPToggle"
espToggle.Parent = GeneralRight.Content
espToggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
espToggle.Position = UDim2.new(0, 0, 0, GeneralRight.CurrentY)
espToggle.Size = UDim2.new(1, 0, 0, 30)
espToggle.Font = Enum.Font.Gotham
espToggle.Text = "ESP: OFF"
espToggle.TextColor3 = Color3.fromRGB(255, 100, 100)
espToggle.TextSize = 14

espToggle.MouseButton1Click:Connect(function()
    ESP.Settings.Enabled = not ESP.Settings.Enabled
    espToggle.Text = ESP.Settings.Enabled and "ESP: ON" or "ESP: OFF"
    espToggle.TextColor3 = ESP.Settings.Enabled and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
end)

GeneralRight.CurrentY = GeneralRight.CurrentY + 35

--=================================--
--        AIMBOT TAB               --
--=================================--

local AimbotLeft = Library:CreateSection(Tabs.Aimbot, "Aimbot Settings", "Left")

-- Lock Part Dropdown
local lockPartLabel = Instance.new("TextLabel")
lockPartLabel.Name = "LockPartLabel"
lockPartLabel.Parent = AimbotLeft.Content
lockPartLabel.BackgroundTransparency = 1
lockPartLabel.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
lockPartLabel.Size = UDim2.new(1, 0, 0, 20)
lockPartLabel.Font = Enum.Font.Gotham
lockPartLabel.Text = "Lock Part:"
lockPartLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
lockPartLabel.TextSize = 12
lockPartLabel.TextXAlignment = Enum.TextXAlignment.Left

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 25

local lockPartBox = Instance.new("TextBox")
lockPartBox.Name = "LockPartBox"
lockPartBox.Parent = AimbotLeft.Content
lockPartBox.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
lockPartBox.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
lockPartBox.Size = UDim2.new(1, 0, 0, 25)
lockPartBox.Font = Enum.Font.Gotham
lockPartBox.PlaceholderText = "Head"
lockPartBox.Text = "Head"
lockPartBox.TextColor3 = Color3.fromRGB(255, 255, 255)
lockPartBox.TextSize = 14

lockPartBox.FocusLost:Connect(function()
    Aimbot.Settings.LockPart = lockPartBox.Text
end)

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 30

-- FOV Slider
local fovLabel = Instance.new("TextLabel")
fovLabel.Name = "FOVLabel"
fovLabel.Parent = AimbotLeft.Content
fovLabel.BackgroundTransparency = 1
fovLabel.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
fovLabel.Size = UDim2.new(1, 0, 0, 20)
fovLabel.Font = Enum.Font.Gotham
fovLabel.Text = "FOV Radius: 150"
fovLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
fovLabel.TextSize = 12
fovLabel.TextXAlignment = Enum.TextXAlignment.Left

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 25

local fovSlider = Instance.new("Frame")
fovSlider.Name = "FOVSlider"
fovSlider.Parent = AimbotLeft.Content
fovSlider.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
fovSlider.Position = UDim2.new(0, 0, 0, AimbotLeft.CurrentY)
fovSlider.Size = UDim2.new(1, 0, 0, 10)

local fovFill = Instance.new("Frame")
fovFill.Name = "Fill"
fovFill.Parent = fovSlider
fovFill.BackgroundColor3 = Color3.fromRGB(0, 120, 255)
fovFill.BorderSizePixel = 0
fovFill.Size = UDim2.new(0.5, 0, 1, 0)

local fovButton = Instance.new("TextButton")
fovButton.Name = "DragButton"
fovButton.Parent = fovSlider
fovButton.BackgroundTransparency = 1
fovButton.Size = UDim2.new(1, 0, 1, 0)
fovButton.Text = ""

local dragging = false
fovButton.MouseButton1Down:Connect(function()
    dragging = true
end)

userInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

fovButton.MouseMoved:Connect(function()
    if dragging then
        local pos = userInputService:GetMouseLocation()
        local absPos = fovSlider.AbsolutePosition
        local absSize = fovSlider.AbsoluteSize
        local percent = mathclamp((pos.X - absPos.X) / absSize.X, 0, 1)
        fovFill.Size = UDim2.new(percent, 0, 1, 0)
        local value = mathfloor(percent * 720)
        fovLabel.Text = "FOV Radius: "..value
        Aimbot.FOVSettings.Radius = value
    end
end)

AimbotLeft.CurrentY = AimbotLeft.CurrentY + 15

--=================================--
--        ESP TAB                  --
--=================================--

local ESPLeft = Library:CreateSection(Tabs.ESP, "ESP Settings", "Left")

-- ESP Options
local options = {"Boxes", "Names", "Distances", "HealthBar", "Tracers", "TeamCheck"}
for i, opt in ipairs(options) do
    local toggle = Instance.new("TextButton")
    toggle.Name = opt.."Toggle"
    toggle.Parent = ESPLeft.Content
    toggle.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    toggle.Position = UDim2.new(0, 0, 0, ESPLeft.CurrentY)
    toggle.Size = UDim2.new(1, 0, 0, 25)
    toggle.Font = Enum.Font.Gotham
    toggle.Text = opt..": ON"
    toggle.TextColor3 = Color3.fromRGB(100, 255, 100)
    toggle.TextSize = 12
    
    local settingName = opt
    toggle.MouseButton1Click:Connect(function()
        ESP.Settings[settingName] = not ESP.Settings[settingName]
        toggle.Text = ESP.Settings[settingName] and (opt..": ON") or (opt..": OFF")
        toggle.TextColor3 = ESP.Settings[settingName] and Color3.fromRGB(100, 255, 100) or Color3.fromRGB(255, 100, 100)
    end)
    
    ESPLeft.CurrentY = ESPLeft.CurrentY + 28
end

--=================================--
--        ESP FUNCTIONS            --
--=================================--

local function isTeam(player)
    if not player then return false end
    if ESP.DeveloperSettings.TeamCheckOption == "Team" then
        return player.Team == localPlayer.Team
    else
        return player.TeamColor == localPlayer.TeamColor
    end
end

local function getPlayerColor(player)
    if ESP.Settings.TeamCheck and isTeam(player) then
        return ESP.Properties.ESP.TeamColor
    else
        return ESP.Properties.ESP.EnemyColor
    end
end

local function createESPObject(player)
    local obj = {
        Player = player,
        Box = Drawingnew("Square"),
        Name = Drawingnew("Text"),
        Distance = Drawingnew("Text"),
        HealthBar = Drawingnew("Square"),
        Tracer = Drawingnew("Line")
    }
    
    -- Setup drawings
    obj.Box.Visible = false
    obj.Box.Thickness = ESP.Properties.Box.Thickness
    obj.Box.Filled = ESP.Properties.Box.Filled
    obj.Box.Color = ESP.Properties.Box.Color
    
    obj.Name.Visible = false
    obj.Name.Size = ESP.Properties.ESP.Size
    obj.Name.Center = true
    obj.Name.Outline = true
    obj.Name.Font = 2
    
    obj.Distance.Visible = false
    obj.Distance.Size = 14
    obj.Distance.Center = true
    obj.Distance.Outline = true
    obj.Distance.Font = 2
    
    obj.HealthBar.Visible = false
    obj.HealthBar.Thickness = 1
    obj.HealthBar.Filled = true
    
    obj.Tracer.Visible = false
    obj.Tracer.Thickness = ESP.Properties.Tracer.Thickness
    
    return obj
end

local function updateESP()
    if not ESP.Settings.Enabled then
        for _, obj in pairs(ESP.Objects) do
            if obj.Box then obj.Box.Visible = false end
            if obj.Name then obj.Name.Visible = false end
            if obj.Distance then obj.Distance.Visible = false end
            if obj.HealthBar then obj.HealthBar.Visible = false end
            if obj.Tracer then obj.Tracer.Visible = false end
        end
        return
    end
    
    for _, player in ipairs(players:GetPlayers()) do
        if player ~= localPlayer and player.Character and player.Character:FindFirstChild("HumanoidRootPart") then
            if not ESP.Objects[player] then
                ESP.Objects[player] = createESPObject(player)
            end
            
            local obj = ESP.Objects[player]
            local root = player.Character.HumanoidRootPart
            local head = player.Character:FindFirstChild("Head") or root
            local humanoid = player.Character:FindFirstChild("Humanoid")
            local pos, onScreen = camera:WorldToViewportPoint(root.Position)
            local headPos, _ = camera:WorldToViewportPoint(head.Position + Vector3.new(0, 3, 0))
            
            if onScreen and humanoid and humanoid.Health > 0 then
                local distance = (root.Position - camera.CFrame.Position).Magnitude
                local scale = 300 / distance
                local boxHeight = 180 * scale
                local boxWidth = 70 * scale
                local boxY = pos.Y - boxHeight / 2
                local boxX = pos.X - boxWidth / 2
                local color = getPlayerColor(player)
                
                -- Box
                if ESP.Settings.Boxes then
                    obj.Box.Visible = true
                    obj.Box.Color = color
                    obj.Box.Position = Vector2.new(boxX, boxY)
                    obj.Box.Size = Vector2.new(boxWidth, boxHeight)
                else
                    obj.Box.Visible = false
                end
                
                -- Name
                if ESP.Settings.Names then
                    obj.Name.Visible = true
                    obj.Name.Color = color
                    obj.Name.Position = Vector2.new(pos.X, headPos.Y - 20)
                    obj.Name.Text = player.Name
                else
                    obj.Name.Visible = false
                end
                
                -- Distance
                if ESP.Settings.Distances then
                    obj.Distance.Visible = true
                    obj.Distance.Color = color
             
